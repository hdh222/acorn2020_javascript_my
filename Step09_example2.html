<!-- 그림판 만들어보기 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step09_example2.html</title>
    <style>
        canvas{
            border : 1px solid red;
        }
    </style>
</head>
<body>
    <h1>그림판 만들기</h1>
    <canvas id="myCanvas" width="500" height="500"></canvas>
    <div>
        색상<input type="color" id="selectedColor">
        굵기<input type="range" id="selectedWidth" min = "1" max = "20" value="5" step="1">
        <strong id = "displayWidth">5</strong>
        <button id ="clearBtn">Clear</button>
    </div>
    <script>
        var canvas = document.querySelector("#myCanvas");                       //캔바스 참조값 얻어오기
        var context = canvas.getContext("2d");                                  //그림을 그릴 수 있는 도구의 참조값 얻어오기
        var thisColor = "#000000";
        var thisWidth = 5;                                 
        
        //부드럽게 그려지게 하려면
        context.lineCap = "round";
        context.lineJoin = "round";

        //현재 그림을 그리고 있는 상태인지 여부를 관리할 변수를 선언하고 초기값 부여하기
        var isDrawing = false;
        document.querySelector("#myCanvas").addEventListener("mousedown", function(event){
            //이벤트가 일어난 좌표에서 선을 그릴 준비를 한다.
            // console.log(event);
            //이벤트가 일어난 곳의 좌표 얻어오기
            var x = event.offsetX;
            var y = event.offsetY;

            context.beginPath();                    //경로시작
            context.moveTo(x,y);               //시작점 지정
            isDrawing = true;                  //상태값 변경 (그림을 그린다는 상태)
        });
        document.querySelector("#myCanvas").addEventListener("mousemove", function(event){
            //이벤트가 일어난 좌표까지 선을 그린다.
            if(!isDrawing){          //상태 값이 false이면 함수 종료
                return;      //선 그리기
            }else{                  //상태 값이 true이면 선 그리기
                var x = event.offsetX;
                var y = event.offsetY;

                //해당 좌표까지 선을 이어준다.
                context.lineTo(x, y);               //이을점2 지정
                context.stroke();
            }
            
        });
        document.querySelector("#myCanvas").addEventListener("mouseup", function(){
            // 더이상 선이 그려지지 않도록한다.
            context.closePath();                    //경로 마무리
            isDrawing = false;                      //상태변경(그림을 그리지 않는 상태)
        });
        
       document.querySelector("#selectedColor").addEventListener("change",function(){
           thisColor = this.value;
           context.strokeStyle = thisColor;        //선의 색상
        
       });
        
    //    document.querySelector("#selectedWidth").addEventListener("change",function(){
    //        thisWidth = this.value;
    //        context.lineWidth = thisWidth;                  //선의 굵기
        
    //    });

       //굵기를 바꿀때 실행 할 함수 등록
       document.querySelector("#selectedWidth").addEventListener("input", function(){
           //현재 value 값을 테스트로 콘솔창에 출력해보기
           console.log(this.value);
           document.querySelector("#displayWidth").innerText = this.value;
           thisWidth = this.value;
           context.lineWidth = thisWidth;  

       });
       document.querySelector("#clearBtn").addEventListener("click", function(){
            //context를 이용해서 사각형 영역 clear하기
            //
            context.clearRect(0, 0, 500, 500); //.clearRect(x, y, width, height)     
       }); 
       
    </script>
</body>
</html>